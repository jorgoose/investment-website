<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <div>
      <title>Portfolio Overview</title>
    </div>
    <link rel="stylesheet" href="/assets/style.css" />
    <script src="https://go-echarts.github.io/go-echarts-assets/assets/echarts.min.js"></script>
  </head>
  <body>
    <main>
      <div class="navbar">
        <a class="logo" href="/">Portfolio Overview</a>
        <form action="/search" method="POST">
          <input
            autofocus
            class="search-input"
            placeholder="Enter a ticker symbol"
            type="searchbox"
            name="searchq"
          />
        </form>
        <a
          href="https://github.com/freshman-tech/news"
          class="button github-button"
          >View on GitHub</a
        >
      </div>
    </main>
  </div>
  <div class="container">
    <div
      class="item"
      id="stvWxsJotGQx"
      style="width: 100%; height: 500px"
    ></div>
  </div>
  <script type="text/javascript">
    "use strict";

    let goecharts_stvWxsJotGQx = echarts.init(
      document.getElementById("stvWxsJotGQx"),
      "white"
    );
    let option_stvWxsJotGQx = {
      color: [
        "#749f83",
        "#663a82",
        "#c23531",
        "#2f4554",
        "#61a0a8",
        "#d48265",
        "#dec20b",
        "#ca8622",
        "#bda29a",
        "#6e7074",
        "#546570",
      ],
      legend: { show: false },
      series: [
        {
          name: "Portfolio Distribution",
          type: "pie",
          waveAnimation: false,
          data: [
            {
              name: "Cash",
              value: Math.round('{{index .Sectors "Cash"}}'),
            },
            {
              name: "Technology",
              value: Math.round('{{index .Sectors "Technology"}}'),
            },
            {
              name: "Consumer",
              value: Math.round('{{index .Sectors "Consumer"}}'),
            },
            {
              name: "Financials",
              value: Math.round('{{index .Sectors "Financials"}}'),
            },
            {
              name: "Energy",
              value: Math.round('{{index .Sectors "Energy"}}'),
            },
            {
              name: "Healthcare",
              value: Math.round('{{index .Sectors "Healthcare"}}'),
            },
            {
              name: "Industrials",
              value: Math.round('{{index .Sectors "Industrials"}}'),
            },
          ],
          label: { show: true, formatter: "{b}: {c}" },
        },
      ],
      title: {},
      tooltip: { show: false },
    };
    goecharts_stvWxsJotGQx.setOption(option_stvWxsJotGQx);
  </script>
    <div class="container">
      {{range .Portfolio}}
      <h3>{{.Name}} (Ticker: {{.Symbol}})</h3>
      <p>
        Current Price: {{.CurrPrice}} <br />
        Shares Owned: {{.Quantity}}, Avg. Price: {{.AvgPrice}} <br />
        <br />{{end}}
      </p>
      <div>
        {{ range $key, $value := .Sectors }}
        <li><strong>{{ $key }}</strong>: {{ $value }}</li>
        {{ end }}
      </div>
    </body>
  </html>
</html>
